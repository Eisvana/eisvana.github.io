import{_ as f}from"./PicoStyle.vue_vue_type_script_setup_true_lang.DKhuZFY3.js";import{d as b,h as l,k as w,o as v,b as _,w as y,m as h,t as g,n as D,_ as S,p as c}from"./framework.CTjf6bD_.js";async function F(t,n){await fetch(t,{method:"POST",body:n})}async function x(t,n){try{const e=n.map(a=>F(t,a));await Promise.all(e)}catch(e){throw console.error("An error occurred:",e),e instanceof Error?e:new Error("Something went wrong!")}}const B=["aria-busy","disabled"],k=b({__name:"SubmitButton",props:{webhook:{},formDataArray:{},isIncomplete:{type:Boolean},isBusy:{type:Boolean},text:{}},emits:["success","fail"],setup(t,{emit:n}){const e=t,a=n,o=l(!1),s=l(!1),r=l(!1),u=l(!1);async function p(){try{if(e.isIncomplete)throw u.value=!0,new Error("incomplete");o.value=!0,await x(e.webhook,e.formDataArray),r.value=!0,a("success")}catch(i){console.warn("caught error:",i),a("fail"),s.value=!0}finally{o.value=!1,setTimeout(()=>{r.value=!1,s.value=!1,u.value=!1},1500)}}const d=w(()=>e.text?e.text:u.value?"Please fill out all fields":o.value?"Sending...":s.value?"Failed!":r.value?"Sent!":"Submit");return(i,C)=>(v(),_(f,null,{default:y(()=>[h("button",{"aria-busy":o.value||i.isBusy,class:D({"is-error":s.value,"is-success":r.value}),disabled:o.value||i.isBusy,onClick:p},g(d.value),11,B)]),_:1}))}}),I=S(k,[["__scopeId","data-v-b31b72cf"]]),m=t=>t.replaceAll(/['"[\]{} ]/g,"_");function $(t,n){const e=new File([t],`${m(n)}.md`,{type:"text/plain"}),a=new FormData;return a.append("file",e),a.append("payload_json",JSON.stringify({content:`Category: ${n}`,allowed_mentions:{parse:[]}})),a}function O(t){const n=new FormData;for(let e=0;e<((t==null?void 0:t.length)??0);e++){const a=t==null?void 0:t[e];a&&n.append(`image${e}`,a)}return n}function T({requestType:t,requestText:n,contact:e}){const a=new FormData;return a.append("payload_json",JSON.stringify({allowed_mentions:{parse:[]},embeds:[{title:c(t),fields:[{name:"Message",value:c(n)},{name:"Contact",value:c(e)}]}]})),a}function j(t,n,e,a){const o=new File([e],`${m(t)}.md`,{type:"text/plain"}),s=new FormData;return s.append("image",a),s.append("payload_json",JSON.stringify({allowed_mentions:{parse:[]},embeds:[{title:"New Player Page Submission",image:{url:"attachment://"+a.name},fields:[{name:"Name",value:t},{name:"Short Description",value:"```"+n+"```"}]}]})),e&&s.append("content",o),s}export{I as S,O as a,j as b,$ as c,T as d,m as e};
